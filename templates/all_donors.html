{% extends "base.html" %}

{% block title %}Network Donors - LifeLink{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>
            <i class="fas fa-network-wired"></i>
            Network Donors
        </h1>
        <p style="color: var(--text-secondary); margin-top: 0.5rem;">All donors across the LifeLink network</p>
    </div>

    <!-- Filters -->
    <div class="filters">
        <div class="filters-grid">
            <div>
                <label class="form-label">Blood Group</label>
                <select id="blood-filter" class="form-select" data-table="donors-table">
                    <option value="all">All</option>
                    <option value="A+">A+</option>
                    <option value="O-">O-</option>
                    <option value="AB+">AB+</option>
                </select>
            </div>
            <div>
                <label class="form-label">Organ Type</label>
                <select id="organ-filter" class="form-select" data-table="donors-table">
                    <option value="all">All</option>
                    <option value="Kidney">Kidney</option>
                    <option value="Liver">Liver</option>
                    <option value="Heart">Heart</option>
                </select>
            </div>
            <div>
                <label class="form-label">Search</label>
                <input type="text" id="table-search" class="form-control" placeholder="Search..." data-table="donors-table">
            </div>
        </div>
    </div>

    <!-- Donors Table -->
    <div class="card">
        <div class="card-header">
            <h3 style="margin: 0;">All Donors ({{ donors|length }})</h3>
        </div>
        <div class="table-responsive">
            {% if donors %}
            <table class="table" id="donors-table">
                <thead>
                    <tr>
                        <th>Donor ID</th>
                        <th>Blood</th>
                        <th>Organ</th>
                        <th>Location</th>
                        <th>Hospital</th>
                    </tr>
                </thead>
                <tbody>
                    {% for donor in donors %}
                    <tr data-id="{{ donor.donor_id }}" data-type="donor" data-blood="{{ donor.blood_group }}" data-organ="{{ donor.organ_type }}">
                        <td><strong>{{ donor.donor_id }}</strong></td>
                        <td><span class="badge badge-success">{{ donor.blood_group }}</span></td>
                        <td><i class="fas fa-heartbeat"></i> {{ donor.organ_type }}</td>
                        <td>{{ donor.location }}</td>
                        <td style="color: var(--text-secondary);">
                            {% if donor.hospital_id == my_hospital_id %}
                            <strong>Your Hospital</strong>
                            {% else %}
                            {{ donor.hospital_name }}
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div style="text-align: center; padding: 4rem;">
                <p style="color: var(--text-secondary);">No donors in network</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}