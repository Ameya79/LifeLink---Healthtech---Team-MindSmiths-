{% extends "base.html" %}

{% block title %}My Donors - LifeLink{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header d-flex justify-between align-center">
        <h1>
            <i class="fas fa-hand-holding-heart"></i>
            My Donors
        </h1>
        <a href="{{ url_for('add_donor') }}" class="btn btn-success">
            <i class="fas fa-plus-circle"></i>
            Add New Donor
        </a>
    </div>

    <!-- Filters -->
    <div class="filters">
        <div class="filters-grid">
            <div>
                <label class="form-label">Blood Group</label>
                <select id="blood-filter" class="form-select" data-table="donors-table">
                    <option value="all">All Blood Groups</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>
            <div>
                <label class="form-label">Organ Type</label>
                <select id="organ-filter" class="form-select" data-table="donors-table">
                    <option value="all">All Organs</option>
                    <option value="Kidney">Kidney</option>
                    <option value="Liver">Liver</option>
                    <option value="Heart">Heart</option>
                    <option value="Lung">Lung</option>
                    <option value="Pancreas">Pancreas</option>
                </select>
            </div>
            <div>
                <label class="form-label">Search</label>
                <input type="text" id="table-search" class="form-control" placeholder="Search by name or ID..." data-table="donors-table">
            </div>
        </div>
    </div>

    <!-- Donors Table -->
    <div class="card">
        <div class="card-header">
            <h3 style="margin: 0;">All Donors ({{ donors|length }})</h3>
        </div>
        <div class="table-responsive">
            {% if donors %}
            <table class="table" id="donors-table">
                <thead>
                    <tr>
                        <th>Donor ID</th>
                        <th>Name</th>
                        <th>Blood</th>
                        <th>Organ Type</th>
                        <th>Location</th>
                        <th>Doctor</th>
                    </tr>
                </thead>
                <tbody>
                    {% for donor in donors %}
                    <tr data-id="{{ donor.donor_id }}" data-type="donor" data-blood="{{ donor.blood_group }}" data-organ="{{ donor.organ_type }}" data-location="{{ donor.location }}">
                        <td><strong>{{ donor.donor_id }}</strong></td>
                        <td>{{ donor.name }}</td>
                        <td><span class="badge badge-success">{{ donor.blood_group }}</span></td>
                        <td><i class="fas fa-heartbeat"></i> {{ donor.organ_type }}</td>
                        <td><i class="fas fa-map-marker-alt"></i> {{ donor.location }}</td>
                        <td style="color: var(--text-secondary);">{{ donor.doctor_assigned }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div style="text-align: center; padding: 4rem;">
                <i class="fas fa-inbox" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                <p style="color: var(--text-secondary);">No donors registered yet</p>
                <a href="{{ url_for('add_donor') }}" class="btn btn-success mt-2">
                    <i class="fas fa-plus-circle"></i>
                    Add First Donor
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}